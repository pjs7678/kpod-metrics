kpod-metrics has been deployed as a DaemonSet.

1. Verify pods are running on each node:

   kubectl get pods -l app.kubernetes.io/name=kpod-metrics -o wide

2. Check health status (BPF programs and collection pipeline):

   kubectl exec ds/{{ .Release.Name }} -- curl -s http://localhost:9090/actuator/health | python3 -m json.tool

3. Port-forward to check metrics:

   kubectl port-forward ds/{{ .Release.Name }} 9090:9090
   curl -s http://localhost:9090/actuator/prometheus | grep kpod_collection
   curl -s http://localhost:9090/actuator/prometheus | grep kpod_bpf_programs

4. Verify self-monitoring metrics are flowing:

   curl -s http://localhost:9090/actuator/prometheus | grep -c '^kpod_'

{{- if .Values.serviceMonitor.enabled }}

Prometheus Operator: ServiceMonitor is enabled. Verify scraping:

   kubectl get servicemonitor {{ .Release.Name }}
{{- end }}
{{- if .Values.prometheusRule.enabled }}

Prometheus Operator: PrometheusRule is enabled with alerting rules:

   kubectl get prometheusrule {{ .Release.Name }}
{{- end }}
{{- if .Values.grafana.dashboard.enabled }}

Grafana: Dashboard ConfigMap deployed. It will auto-provision if the
Grafana sidecar is configured with label selector "grafana_dashboard".
{{- end }}

Troubleshooting: https://github.com/pjs7678/kpod-metrics/blob/main/docs/troubleshooting.md
